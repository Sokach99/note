import{_ as k,c as h,I as r,w as c,l as e,a as d,ad as o,E as n,o as t,b as F,e as g}from"./chunks/framework.tERAsXIj.js";const x=JSON.parse('{"title":"Docker安装","description":"","frontmatter":{"title":"Docker安装","author":"Sokach","date":"2024-05-12 18:00","categories":["Docker","服务"],"tags":["Docker"]},"headers":[],"relativePath":"archives/service/2024/05/12/Docker安装.md","filePath":"archives/service/2024/05/12/Docker安装.md","lastUpdated":1715936279000}'),y={name:"archives/service/2024/05/12/Docker安装.md"},D=e("h1",{id:"docker安装",tabindex:"-1"},[d("Docker安装 "),e("a",{class:"header-anchor",href:"#docker安装","aria-label":'Permalink to "Docker安装"'},"​")],-1),u=o(`<h2 id="安装服务" tabindex="-1">安装服务 <a class="header-anchor" href="#安装服务" aria-label="Permalink to &quot;安装服务&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># step 1: 安装必要的一些系统工具</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> yum</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> yum-utils</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> device-mapper-persistent-data</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> lvm2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># Step 2: 添加软件源信息</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> yum-config-manager</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --add-repo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># Step 3: 更新并安装 Docker-CE</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> yum</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> makecache</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> fast</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> yum</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> docker-ce</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># Step 4: 开启Docker服务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> service</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> start</span></span></code></pre></div><h2 id="安装指定版本的docker" tabindex="-1">安装指定版本的Docker <a class="header-anchor" href="#安装指定版本的docker" aria-label="Permalink to &quot;安装指定版本的Docker&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">注意：其他注意事项在下面的注释中</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 官方软件源默认启用了最新的软件，您可以通过编辑软件源的方式获取各个版本的软件包。例如官方并没有将测试版本的软件源置为可用，你可以通过以下方式开启。同理可以开启各种测试版本等。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># vim /etc/yum.repos.d/docker-ce.repo</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#   将 [docker-ce-test] 下方的 enabled=0 修改为 enabled=1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 安装指定版本的Docker-CE:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># Step 1: 查找Docker-CE的版本:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># yum list docker-ce.x86_64 --showduplicates | sort -r</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#   Loading mirror speeds from cached hostfile</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#   Loaded plugins: branch, fastestmirror, langpacks</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#   docker-ce.x86_64            17.03.1.ce-1.el7.centos            docker-ce-stable</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#   docker-ce.x86_64            17.03.1.ce-1.el7.centos            @docker-ce-stable</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#   docker-ce.x86_64            17.03.0.ce-1.el7.centos            docker-ce-stable</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#   Available Packages</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># Step2 : 安装指定版本的Docker-CE: (VERSION 例如上面的 17.03.0.ce.1-1.el7.centos)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># sudo yum -y install docker-ce-[VERSION]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 注意：在某些版本之后，docker-ce安装出现了其他依赖包，如果安装失败的话请关注错误信息。例如 docker-ce 17.03 之后，需要先安装 docker-ce-selinux。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># yum list docker-ce-selinux- --showduplicates | sort -r</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># sudo yum -y install docker-ce-selinux-[VERSION]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 通过经典网络、VPC网络内网安装时，用以下命令替换Step 2中的命令</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 经典网络：</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># sudo yum-config-manager --add-repo &lt;http://mirrors.aliyuncs.com/docker-ce/linux/centos/docker-ce.repo&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># VPC网络：</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># sudo yum-config-manager --add-repo &lt;http://mirrors.could.aliyuncs.com/docker-ce/linux/centos/docker-ce.repo&gt;</span></span></code></pre></div><h2 id="配置国内镜像" tabindex="-1">配置国内镜像 <a class="header-anchor" href="#配置国内镜像" aria-label="Permalink to &quot;配置国内镜像&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /etc/docker</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">tee</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /etc/docker/daemon.json</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &lt;&lt;-</span><span style="--shiki-light:#032F62;--shiki-dark:#ADBAC7;">&#39;EOF&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  &quot;data-root&quot;: &quot;/data01/docker&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  &quot;registry-mirrors&quot;: [&quot;https://镜像的地址&quot;]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#ADBAC7;">EOF</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> daemon-reload</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> docker</span></span></code></pre></div>`,6);function m(s,C,A,_,b,v){const l=n("ArticleMetadata"),p=n("ClientOnly");return t(),h("div",null,[D,r(p,null,{default:c(()=>{var a,i;return[(((a=s.$frontmatter)==null?void 0:a.aside)??!0)&&(((i=s.$frontmatter)==null?void 0:i.showArticleMetadata)??!0)?(t(),F(l,{key:0,article:s.$frontmatter},null,8,["article"])):g("",!0)]}),_:1}),u])}const S=k(y,[["render",m]]);export{x as __pageData,S as default};
